<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.matchai.board.mapper.BoardMapper">
	<!-- kbo 당일 경기 개수 확인 -->
	<select id="kboCnt" resultType="Integer">
		SELECT COUNT(tkt.DATE) 
		FROM TBL_KBOSCHEDULE_TTP tkt
		 WHERE tkt.DATE = '2024-07-11'; <!--데이터 없어서 날자 지정해놓음, 수정되면 아래 줄로 수정 -->
		<!--WHERE tkt.DATE = CURDATE(); -->
	</select>
	
	<!-- mlb 당일 경기 개수 확인 -->
	<select id="mlbCnt" resultType="Integer">
		SELECT COUNT(tmt.DATE) 
		FROM TBL_MLBSCHEDULE_TTP tmt
		 WHERE tmt.DATE = '2024-07-12'; <!--데이터 없어서 날자 지정해놓음, 수정되면 아래 줄로 수정 -->
		<!--WHERE tmt.DATE = DATE_ADD(CURDATE(), INTERVAL 1 DAY);  -->
	</select>
	
	<!-- kbo 당일 경기 목록 가져오기 -->
	<select id="kboMatchList" resultType="hashmap">
		SELECT 
		    ttm1.TEAMNAME_KR AS team1,
		    ttm2.TEAMNAME_KR AS team2,
		    tkt.TEAM1 AS code1,
		    tkt.TEAM2 AS code2
		FROM 
		    TBL_KBOSCHEDULE_TTP tkt
		JOIN 
		    TBL_TEAM_MT01 ttm1 ON tkt.TEAM1 = ttm1.TEAM_CODE
		JOIN 
		    TBL_TEAM_MT01 ttm2 ON tkt.TEAM2 = ttm2.TEAM_CODE
		WHERE  
		    tkt.DATE = '2024-07-11'; <!-- 데이터 없어서 날자 지정해놓음, 수정되면 아래 줄로 수정 -->
		    <!--tkt.DATE = CURDATE();   -->
	</select>
	
	<!-- mlb 당일 경기 목록 가져오기 -->
	<select id="mlbMatchList" resultType="hashmap">
		SELECT 
		    ttm1.TEAMNAME_KR AS team1,
		    ttm2.TEAMNAME_KR AS team2,
		    tmt.TEAM1 AS code1,
		    tmt.TEAM2 AS code2
		FROM 
		    TBL_MLBSCHEDULE_TTP tmt
		JOIN 
		    TBL_TEAM_MT01 ttm1 ON tmt.TEAM1 = ttm1.TEAM_CODE
		JOIN 
		    TBL_TEAM_MT01 ttm2 ON tmt.TEAM2 = ttm2.TEAM_CODE
		WHERE   
		   tmt.DATE = '2024-07-12'; <!-- 데이터 없어서 날자 지정해놓음, 수정되면 아래 줄로 수정 --> 
		   <!-- tmt.DATE = DATE_ADD(CURDATE(), INTERVAL 1 DAY);   -->
	</select>
	
	<select id="getGameData" parameterType="hashmap" resultType="hashmap">
		SELECT tgt.TEAM1, tgt.TEAM2, ttm1.TEAMNAME_KR AS TEAM1NAME, ttm2.TEAMNAME_KR as TEAM2NAME,
	       tgt.TEAM1_WINRATE, tgt.TEAM2_WINRATE, tgt.TEAM1_SCORE, tgt.TEAM2_SCORE, tgt.GAME_ANALYSIS 
	  	  FROM TBL_GPTEXEPECT_TTP tgt 
	     INNER JOIN TBL_TEAM_MT01 ttm1 on tgt.TEAM1 = ttm1.TEAM_CODE
	     INNER JOIN TBL_TEAM_MT01 ttm2 on tgt.TEAM2 = ttm2.TEAM_CODE
	     WHERE tgt.TEAM1 = #{teamCode2}
	       AND tgt.TEAM2 = #{teamCode1}
	     LIMIT 1
	</select>
</mapper>